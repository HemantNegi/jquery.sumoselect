!function(e){"namespace sumo";e.fn.SumoSelect=function(t){var o=e.extend({placeholder:"Select Here",csvDispCount:3,captionFormat:"{0} Selected",floatWidth:400,forceCustomRendering:!1,nativeOnDevice:["Android","BlackBerry","iPhone","iPad","iPod","Opera Mini","IEMobile","Silk"],outputAsCSV:!1,csvSepChar:",",okCancelInMulti:!1,triggerChangeCombined:!0,allowSearch:!1},t),l=this.each(function(){var t=this;!this.sumo&&e(this).is("select")&&(this.sumo={E:e(t),is_multi:e(t).attr("multiple"),select:"",caption:"",placeholder:"",optDiv:"",CaptionCont:"",is_floating:!1,is_opened:!1,backdrop:"",mob:!1,Pstate:[],createElems:function(){var t=this;return t.E.wrap('<div class="SumoSelect">'),t.select=t.E.parent(),t.caption=e("<span></span>"),t.CaptionCont=e('<p class="CaptionCont"><label><i></i></label></p>').addClass("SlectBox").attr("style",t.E.attr("style")).prepend(t.caption),t.select.append(t.CaptionCont),t.E.attr("disabled")&&t.select.addClass("disabled"),o.outputAsCSV&&t.is_multi&&t.E.attr("name")&&(t.select.append(e('<input class="HEMANT123" type="hidden" />').attr("name",t.E.attr("name")).val(t.getSelStr())),t.E.removeAttr("name")),t.isMobile()&&!o.forceCustomRendering?void t.setNativeMobile():(t.E.hide(),t.optDiv=e('<div class="optWrapper">'),t.floatingList(),ul=e('<ul class="options">'),t.optDiv.append(ul),e(t.E.find("option")).each(function(i,o){o=e(o),t.createLi(o)}),o.allowSearch&&t.allowSearch(),t.is_multi&&t.multiSelelect(),e(".BackdropSelect").length||e("body").append('<div class="BackdropSelect">'),t.backdrop=e(".BackdropSelect"),t.select.append(t.optDiv),void t.basicEvents())},createLi:function(t,i){var o=this;if(li=e('<li data-val="'+t.val()+'"><label>'+t.text()+"</label></li>"),o.is_multi&&li.prepend("<span><i></i></span>"),t.attr("selected")&&li.addClass("selected"),ul=o.optDiv.children("ul.options"),"undefined"==typeof i?ul.append(li):ul.children("li").eq(i).before(li),t.is("optgroup > option:first-child")){var l=e('<li class="optGroup"><label>'+t.parent("optgroup").attr("label")+"</label></li>").click(function(){if(o.is_multi){var t=e(this).nextUntil(".optGroup, .optGroupEnd").filter("li:not(.disabled)").length,i=e(this).nextUntil(".optGroup, .optGroupEnd").filter("li.selected:not(.disabled)").length;t==i||t/2>=i&&0!=i?e(this).nextUntil(".optGroup, .optGroupEnd").filter("li:not(.disabled).selected").each(function(){e(this).click()}):e(this).nextUntil(".optGroup, .optGroupEnd").filter("li:not(.disabled):not(.selected)").each(function(){e(this).click()})}});li.before(l),t.parent("optgroup").attr("disabled")&&li.prev().addClass("disabled")}return t.is("optgroup > option:last-child")&&"OPTGROUP"!=t.parent().next().prop("tagName")&&li.after('<li class="optGroupEnd"><div class="stroke"></div></li>'),t.attr("disabled")||t.parent("optgroup").attr("disabled")?li.addClass("disabled"):o.onOptClick(li),li},getSelStr:function(){return sopt=[],this.E.find("option:selected").each(function(){sopt.push(e(this).val())}),sopt.join(o.csvSepChar)},allowSearch:function(){var t=this;searchField=e('<input type="text" placeholder="Search..." />').keyup(function(){var i=e(this).val().toLowerCase();t.isEmpty(i)?t.optDiv.find("li").show():(t.optDiv.find("li.disabled:not(.optGroup)").hide(),t.optDiv.find("li:not(.disabled):not(.optGroup)").each(function(){-1!=e(this).find("label").text().toLowerCase().indexOf(i)?e(this).show():e(this).hide()}))}),t.optDiv.prepend(e('<div class="SearchArea">').append(searchField))},multiSelelect:function(){var t=this;t.optDiv.addClass("multiple"),okbtn=e('<p class="btnOk">OK</p>').click(function(){o.triggerChangeCombined&&(changed=!1,t.E.find("option:selected").length!=t.Pstate.length?changed=!0:t.E.find("option:selected").each(function(){t.Pstate.indexOf(e(this).val())<0&&(changed=!0)}),changed&&(t.E.trigger("change"),t.setText())),t.hideOpts()}),cancelBtn=e('<p class="btnCancel">Cancel</p>').click(function(){for(t.E.find("option:selected").each(function(){this.selected=!1}),t.optDiv.find("li.selected").removeClass("selected"),i=0;i<t.Pstate.length;i++)t.E.find('option[value="'+t.Pstate[i]+'"]')[0].selected=!0,t.optDiv.find('li[data-val="'+t.Pstate[i]+'"]').addClass("selected");t.setText(),t.hideOpts()}),t.optDiv.append(e('<div class="MultiControls">').append(okbtn).append(cancelBtn))},showOpts:function(){var t=this;t.E.attr("disabled")||(t.is_opened=!0,t.backdrop.show(),t.optDiv.addClass("open"),t.is_floating&&(H=t.optDiv.children("ul").outerHeight()+2,t.is_multi&&(H+=parseInt(t.optDiv.css("padding-bottom"))),t.optDiv.css("height",H)),t.is_multi&&(t.is_floating||o.okCancelInMulti)&&(t.Pstate=[],t.E.find("option:selected").each(function(){t.Pstate.push(e(this).val())})))},hideOpts:function(){var e=this;e.is_opened=!1,e.backdrop.hide(),e.optDiv.removeClass("open")},isEmpty:function(e){return!e||0===e.length},basicEvents:function(){var t=this;t.CaptionCont.click(function(){t.is_opened?t.hideOpts():t.showOpts(),t.E.trigger("click")}),t.backdrop.click(function(){t.hideOpts()}),t.E.on("blur",function(){t.optDiv.removeClass("open")}),e(window).on("resize.sumo",function(){t.floatingList()})},onOptClick:function(t){var i=this;t.click(function(){var t=e(this);txt="",i.is_multi?(t.toggleClass("selected"),i.E.find('option[value="'+t.attr("data-val")+'"]')[0].selected=t.hasClass("selected")):(t.parent().find("li.selected").removeClass("selected"),t.toggleClass("selected"),i.E.val(t.attr("data-val"))),i.is_multi&&o.triggerChangeCombined&&(i.is_floating||o.okCancelInMulti)||(i.setText(),i.E.trigger("change")),i.is_multi||i.hideOpts()})},setText:function(){var t=this;if(t.placeholder="",t.is_multi){for(sels=t.E.find(":selected").not(":disabled"),i=0;i<sels.length;i++){if(i>=o.csvDispCount&&o.csvDispCount){t.placeholder=o.captionFormat.replace("{0}",sels.length);break}t.placeholder+=e(sels[i]).text()+", "}t.placeholder=t.placeholder.replace(/,([^,]*)$/,"$1")}else t.placeholder=t.E.find(":selected").not(":disabled").text();return is_placeholder=!1,t.placeholder||(is_placeholder=!0,t.placeholder=t.E.attr("placeholder"),t.placeholder||(t.placeholder=t.E.find("option:disabled:selected").text())),t.placeholder=t.placeholder?t.placeholder:o.placeholder,t.caption.text(t.placeholder),csvField=t.select.find("input.HEMANT123"),csvField.length&&csvField.val(t.getSelStr()),is_placeholder?t.caption.addClass("placeholder"):t.caption.removeClass("placeholder"),t.placeholder},isMobile:function(){var e=navigator.userAgent||navigator.vendor||window.opera;for(var t in o.nativeOnDevice)if(e.toLowerCase().indexOf(o.nativeOnDevice[t].toLowerCase())>0)return o.nativeOnDevice[t];return!1},setNativeMobile:function(){var e=this;e.E.addClass("SelectClass"),e.mob=!0,e.E.change(function(){e.setText()})},floatingList:function(){var t=this;t.is_floating=e(window).width()<=o.floatWidth,t.optDiv.toggleClass("isFloating",t.is_floating),t.is_floating||t.optDiv.css("height",""),t.optDiv.toggleClass("okCancelInMulti",o.okCancelInMulti&&!t.is_floating)},vRange:function(e){var t=this;if(opts=t.E.find("option"),opts.length<=e||0>e)throw"index out of bounds";return t},toggSel:function(e,t){var i=this.vRange(t);i.E.find("option")[t].disabled||(i.E.find("option")[t].selected=e,i.mob||i.optDiv.find("ul.options li").eq(t).toggleClass("selected",e),i.setText())},toggDis:function(e,t){var i=this.vRange(t);i.E.find("option")[t].disabled=e,i.mob||i.optDiv.find("ul.options li").eq(t).toggleClass("disabled",e),i.setText()},unload:function(){var e=this;return e.select.before(e.E),e.E.removeClass("SelectClass").show(),o.outputAsCSV&&e.is_multi&&e.select.find("input.HEMANT123").length&&e.E.attr("name",e.select.find("input.HEMANT123").attr("name")),e.select.remove(),delete t.sumo,t},add:function(i,o,l){if("undefined"==typeof i)throw"No value to add";var n=this;if(opts=n.E.find("option"),"number"==typeof o&&(l=o,o=i),"undefined"==typeof o&&(o=i),opt=e("<option></option>").val(i).html(o),opts.length<l)throw"index out of bounds";return"undefined"==typeof l||opts.length==l?(n.E.append(opt),n.mob||n.createLi(opt)):(opts.eq(l).before(opt),n.mob||n.createLi(opt,l)),t},remove:function(e){var t=this.vRange(e);t.E.find("option").eq(e).remove(),t.mob||t.optDiv.find("ul.options li").eq(e).remove(),t.setText()},selectItem:function(e){this.toggSel(!0,e)},unSelectItem:function(e){this.toggSel(!1,e)},disableItem:function(e){this.toggDis(!0,e)},enableItem:function(e){this.toggDis(!1,e)},get disabled(){return this.E.attr("disabled")?!0:!1},set disabled(e){var t=this;t.select.toggleClass("disabled",e),e?t.E.attr("disabled","disabled"):t.E.removeAttr("disabled")},init:function(){var e=this;return e.createElems(),e.setText(),e}},t.sumo.init())});return 1==l.length?l[0]:l}}(jQuery);