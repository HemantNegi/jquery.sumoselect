/*!
 * jquery.sumoselect - v3.0.2
 * http://hemantnegi.github.io/jquery.sumoselect
 */

!function(a){"namespace sumo";a.fn.SumoSelect=function(b){var c=a.extend({placeholder:"Select Here",csvDispCount:3,captionFormat:"{0} Selected",captionFormatAllSelected:"{0} all selected!",floatWidth:400,forceCustomRendering:!1,nativeOnDevice:["Android","BlackBerry","iPhone","iPad","iPod","Opera Mini","IEMobile","Silk"],outputAsCSV:!1,csvSepChar:",",okCancelInMulti:!1,triggerChangeCombined:!0,selectAll:!1,search:!1,searchText:"Search...",noMatch:'No matches for "{0}"',prefix:"",locale:["OK","Cancel","Select All"],up:!1},b),d=this.each(function(){var b=this;!this.sumo&&a(this).is("select")&&(this.sumo={E:a(b),is_multi:a(b).attr("multiple"),select:"",caption:"",placeholder:"",optDiv:"",CaptionCont:"",ul:"",is_floating:!1,is_opened:!1,mob:!1,Pstate:[],createElems:function(){var b=this;return b.E.wrap('<div class="SumoSelect" tabindex="0">'),b.select=b.E.parent(),b.caption=a("<span>"),b.CaptionCont=a('<p class="CaptionCont"><label><i></i></label></p>').addClass("SelectBox").attr("style",b.E.attr("style")).prepend(b.caption),b.select.append(b.CaptionCont),b.is_multi||(c.okCancelInMulti=!1),b.E.attr("disabled")&&b.select.addClass("disabled").removeAttr("tabindex"),c.outputAsCSV&&b.is_multi&&b.E.attr("name")&&(b.select.append(a('<input class="HEMANT123" type="hidden" />').attr("name",b.E.attr("name")).val(b.getSelStr())),b.E.removeAttr("name")),b.isMobile()&&!c.forceCustomRendering?void b.setNativeMobile():(b.E.attr("name")&&b.select.addClass("sumo_"+b.E.attr("name")),b.E.addClass("SumoUnder").attr("tabindex","-1"),b.optDiv=a('<div class="optWrapper '+(c.up?"up":"")+'">'),b.floatingList(),b.ul=a('<ul class="options">'),b.optDiv.append(b.ul),c.selectAll&&b.SelAll(),c.search&&b.Search(),b.ul.append(b.prepItems(b.E.children())),b.is_multi&&b.multiSelelect(),b.select.append(b.optDiv),b.basicEvents(),void b.selAllState())},prepItems:function(b,c){var d=[],e=this;return a(b).each(function(b,f){f=a(f),d.push(f.is("optgroup")?a('<li class="group '+(f[0].disabled?"disabled":"")+'"><label>'+f.attr("label")+"</label><ul></ul><li>").find("ul").append(e.prepItems(f.children(),f[0].disabled)).end():e.createLi(f,c))}),d},createLi:function(b,c){var d=this;return b.attr("value")||b.attr("value",b.val()),li=a('<li class="opt"><label>'+b.text()+"</label></li>"),li.data("opt",b),b.data("li",li),d.is_multi&&li.prepend("<span><i></i></span>"),(b[0].disabled||c)&&(li=li.addClass("disabled")),d.onOptClick(li),b[0].selected&&li.addClass("selected"),b.attr("class")&&li.addClass(b.attr("class")),li},getSelStr:function(){return sopt=[],this.E.find("option:selected").each(function(){sopt.push(a(this).val())}),sopt.join(c.csvSepChar)},multiSelelect:function(){var b=this;b.optDiv.addClass("multiple"),b.okbtn=a('<p class="btnOk">'+c.locale[0]+"</p>").click(function(){c.triggerChangeCombined&&(changed=!1,b.E.find("option:selected").length!=b.Pstate.length?changed=!0:b.E.find("option").each(function(a,c){c.selected&&b.Pstate.indexOf(a)<0&&(changed=!0)}),changed&&(b.callChange(),b.setText())),b.hideOpts()}),b.cancelBtn=a('<p class="btnCancel">'+c.locale[1]+"</p>").click(function(){b._cnbtn(),b.hideOpts()}),b.optDiv.append(a('<div class="MultiControls">').append(b.okbtn).append(b.cancelBtn))},_cnbtn:function(){var a=this;a.E.find("option:selected").each(function(){this.selected=!1}),a.optDiv.find("li.selected").removeClass("selected");for(var b=0;b<a.Pstate.length;b++)a.E.find("option")[a.Pstate[b]].selected=!0,a.ul.find("li.opt").eq(a.Pstate[b]).addClass("selected");a.selAllState()},SelAll:function(){var b=this;b.is_multi&&(b.selAll=a('<p class="select-all"><span><i></i></span><label>'+c.locale[2]+"</label></p>"),b.selAll.on("click",function(){b.selAll.toggleClass("selected"),b.optDiv.find("li.opt").not(".hidden").each(function(c,d){d=a(d),b.selAll.hasClass("selected")?d.hasClass("selected")||b.itemClicked(d,!1):d.hasClass("selected")&&b.itemClicked(d,!1)})}),b.optDiv.prepend(b.selAll))},Search:function(){var b=this,d=b.CaptionCont.addClass("search"),e=a('<p class="no-match">');b.ftxt=a('<input type="text" class="search-txt" value="" placeholder="'+c.searchText+'">').on("click",function(a){a.stopPropagation()}),d.append(b.ftxt),b.optDiv.children("ul").after(e),b.ftxt.on("keyup.sumo",function(){var d=b.optDiv.find("ul.options li.opt").each(function(c,d){d=a(d),d.text().toLowerCase().indexOf(b.ftxt.val().toLowerCase())>-1?d.removeClass("hidden"):d.addClass("hidden")}).not(".hidden");e.html(c.noMatch.replace(/\{0\}/g,b.ftxt.val())).toggle(!d.length),b.selAllState()})},selAllState:function(){var b=this;if(c.selectAll){var d=0,e=0;b.optDiv.find("li.opt").not(".hidden").each(function(b,c){a(c).hasClass("selected")&&d++,a(c).hasClass("disabled")||e++}),d==e?b.selAll.removeClass("partial").addClass("selected"):0==d?b.selAll.removeClass("selected partial"):b.selAll.addClass("partial")}},showOpts:function(){var b=this;b.E.attr("disabled")||(b.is_opened=!0,b.select.addClass("open"),b.ftxt?b.ftxt.focus():b.select.focus(),a(document).on("click.sumo",function(a){if(!b.select.is(a.target)&&0===b.select.has(a.target).length){if(!b.is_opened)return;b.hideOpts(),c.okCancelInMulti&&b._cnbtn()}}),b.is_floating&&(H=b.optDiv.children("ul").outerHeight()+2,b.is_multi&&(H+=parseInt(b.optDiv.css("padding-bottom"))),b.optDiv.css("height",H),a("body").addClass("sumoStopScroll")),b.setPstate())},setPstate:function(){var a=this;a.is_multi&&(a.is_floating||c.okCancelInMulti)&&(a.Pstate=[],a.E.find("option").each(function(b,c){c.selected&&a.Pstate.push(b)}))},callChange:function(){this.E.trigger("change").trigger("click")},hideOpts:function(){var b=this;b.is_opened&&(b.is_opened=!1,b.select.removeClass("open").find("ul li.sel").removeClass("sel"),a(document).off("click.sumo"),b.select.focus(),a("body").removeClass("sumoStopScroll"),c.search&&(b.ftxt.val(""),b.optDiv.find("ul.options li").removeClass("hidden"),b.optDiv.find(".no-match").toggle(!1)))},setOnOpen:function(){var a=this,b=a.optDiv.find("li.opt:not(.hidden)").eq(c.search?0:a.E[0].selectedIndex);a.optDiv.find("li.sel").removeClass("sel"),b.addClass("sel"),a.showOpts()},nav:function(a){var c,b=this,d=b.ul.find("li.opt:not(.disabled, .hidden)"),e=b.ul.find("li.opt.sel:not(.hidden)"),f=d.index(e);if(b.is_opened&&e.length){if(a&&f>0)c=d.eq(f-1);else{if(!(!a&&f<d.length-1&&f>-1))return;c=d.eq(f+1)}e.removeClass("sel"),e=c.addClass("sel");var g=b.ul,h=g.scrollTop(),i=e.position().top+h;i>=h+g.height()-e.outerHeight()&&g.scrollTop(i-g.height()+e.outerHeight()),i<h&&g.scrollTop(i)}else b.setOnOpen()},basicEvents:function(){var b=this;b.CaptionCont.click(function(a){b.E.trigger("click"),b.is_opened?b.hideOpts():b.showOpts(),a.stopPropagation()}),b.select.on("keydown.sumo",function(a){switch(a.which){case 38:b.nav(!0);break;case 40:b.nav(!1);break;case 32:if(c.search&&b.ftxt.is(a.target))return;case 13:b.is_opened?b.optDiv.find("ul li.sel").trigger("click"):b.setOnOpen();break;case 9:case 27:return c.okCancelInMulti&&b._cnbtn(),void b.hideOpts();default:return}a.preventDefault()}),a(window).on("resize.sumo",function(){b.floatingList()})},itemClicked:function(a,b){var d=this;a.hasClass("disabled")||(txt="",d.is_multi?(a.toggleClass("selected"),a.data("opt")[0].selected=a.hasClass("selected"),d.selAllState()):(a.parent().find("li.selected").removeClass("selected"),a.toggleClass("selected"),a.data("opt")[0].selected=!0),d.is_multi&&c.triggerChangeCombined&&(d.is_floating||c.okCancelInMulti)||b&&(d.setText(),d.callChange()),d.is_multi||d.hideOpts())},onOptClick:function(b){var c=this;b.click(function(b){b.stopImmediatePropagation(),c.itemClicked(a(this),!0)})},setText:function(){var b=this;if(b.placeholder="",b.is_multi){for(sels=b.E.find(":selected").not(":disabled"),i=0;i<sels.length;i++){if(i+1>=c.csvDispCount&&c.csvDispCount){sels.length==b.E.find("option").length&&c.captionFormatAllSelected?b.placeholder=c.captionFormatAllSelected.replace(/\{0\}/g,sels.length)+",":b.placeholder=c.captionFormat.replace(/\{0\}/g,sels.length)+",";break}b.placeholder+=a(sels[i]).text()+", "}b.placeholder=b.placeholder.replace(/,([^,]*)$/,"$1")}else b.placeholder=b.E.find(":selected").not(":disabled").text();return is_placeholder=!1,b.placeholder||(is_placeholder=!0,b.placeholder=b.E.attr("placeholder"),b.placeholder||(b.placeholder=b.E.find("option:disabled:selected").text())),b.placeholder=b.placeholder?c.prefix+" "+b.placeholder:c.placeholder,b.caption.html(b.placeholder),b.CaptionCont.attr("title",b.placeholder),csvField=b.select.find("input.HEMANT123"),csvField.length&&csvField.val(b.getSelStr()),is_placeholder?b.caption.addClass("placeholder"):b.caption.removeClass("placeholder"),b.placeholder},isMobile:function(){for(var a=navigator.userAgent||navigator.vendor||window.opera,b=0;b<c.nativeOnDevice.length;b++)if(a.toString().toLowerCase().indexOf(c.nativeOnDevice[b].toLowerCase())>0)return c.nativeOnDevice[b];return!1},setNativeMobile:function(){var a=this;a.E.addClass("SelectClass"),a.mob=!0,a.E.change(function(){a.setText()})},floatingList:function(){var b=this;b.is_floating=a(window).width()<=c.floatWidth,b.optDiv.toggleClass("isFloating",b.is_floating),b.is_floating||b.optDiv.css("height",""),b.optDiv.toggleClass("okCancelInMulti",c.okCancelInMulti&&!b.is_floating)},vRange:function(a){var b=this;if(opts=b.E.find("option"),opts.length<=a||a<0)throw"index out of bounds";return b},toggSel:function(b,c){var d=this;"number"==typeof c?(d.vRange(c),opt=d.E.find("option")[c]):opt=d.E.find('option[value="'+c+'"]')[0]||0,opt&&!opt.disabled&&opt.selected!=b&&(opt.selected=b,d.mob||a(opt).data("li").toggleClass("selected",b),d.callChange(),d.setPstate(),d.setText(),d.selAllState())},toggDis:function(a,b){var c=this.vRange(b),d=c.E.find("option")[b];d.disabled=a,a&&(d.selected=!1),c.mob||c.optDiv.find("ul.options li").eq(b).toggleClass("disabled",a).removeClass("selected"),c.setText()},toggSumo:function(a){var b=this;return b.enabled=a,b.select.toggleClass("disabled",a),a?(b.E.attr("disabled","disabled"),b.select.removeAttr("tabindex")):(b.E.removeAttr("disabled"),b.select.attr("tabindex","0")),b},toggSelAll:function(a){var b=this;b.E.find("option").each(function(c,d){var e=b.E.find("option")[c];e.disabled||(e.selected=a,b.mob||b.optDiv.find("ul.options li").eq(c).toggleClass("selected",a))}),b.setText(),!b.mob&&b.selAll&&b.selAll.removeClass("partial").toggleClass("selected",a),b.callChange(),b.setPstate()},reload:function(){var b=this.unload();return a(b).SumoSelect(c)},unload:function(){var a=this;return a.select.before(a.E),a.E.show(),c.outputAsCSV&&a.is_multi&&a.select.find("input.HEMANT123").length&&a.E.attr("name",a.select.find("input.HEMANT123").attr("name")),a.select.remove(),delete b.sumo,b},add:function(c,d,e){if("undefined"==typeof c)throw"No value to add";var f=this;if(opts=f.E.find("option"),"number"==typeof d&&(e=d,d=c),"undefined"==typeof d&&(d=c),opt=a("<option></option>").val(c).html(d),opts.length<e)throw"index out of bounds";return"undefined"==typeof e||opts.length==e?(f.E.append(opt),f.mob||f.ul.append(f.createLi(opt))):(opts.eq(e).before(opt),f.mob||f.ul.find("li.opt").eq(e).before(f.createLi(opt))),b},remove:function(a){var b=this.vRange(a);b.E.find("option").eq(a).remove(),b.mob||b.optDiv.find("ul.options li").eq(a).remove(),b.setText()},selectItem:function(a){this.toggSel(!0,a)},unSelectItem:function(a){this.toggSel(!1,a)},selectAll:function(){this.toggSelAll(!0)},unSelectAll:function(){this.toggSelAll(!1)},disableItem:function(a){this.toggDis(!0,a)},enableItem:function(a){this.toggDis(!1,a)},enabled:!0,enable:function(){return this.toggSumo(!1)},disable:function(){return this.toggSumo(!0)},init:function(){var a=this;return a.createElems(),a.setText(),a}},b.sumo.init())});return 1==d.length?d[0]:d}}(jQuery);